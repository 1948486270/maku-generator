import{d as k,r as F,a as h,b as d,o as P,c as w,w as l,e,l as x,h as E,E as R,k as S,f as z,u as D,m as L}from"./index.38de24dd.js";import{s as B,u as H}from"./index.a604d30d.js";const N=g=>B.get("/gen/project/"+g),$=g=>g.id?B.put("/gen/project",g):B.post("/gen/project",g),O=g=>{location.href="http://localhost:8088/gen/project/download/"+g},K=E("\u53D6\u6D88"),T=E("\u786E\u5B9A"),I=k({__name:"add-or-update",emits:["refreshDataList"],setup(g,{expose:p,emit:j}){const m=F(!1),o=F(),i=h({id:"",projectName:"",projectCode:"",projectPackage:"",projectPath:""}),b=u=>{m.value=!0,i.id="",o.value&&o.value.resetFields(),u&&V(u)},V=u=>{N(u).then(t=>{Object.assign(i,t.data)})},v=F({projectName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],projectCode:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],projectPackage:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],projectPath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=()=>{o.value.validate(u=>{if(!u)return!1;$(i).then(()=>{R.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{m.value=!1,j("refreshDataList")}})})})};return p({init:b}),(u,t)=>{const a=d("el-input"),s=d("el-form-item"),f=d("el-form"),_=d("el-button"),y=d("el-dialog");return P(),w(y,{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=r=>m.value=r),title:i.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:l(()=>[e(_,{onClick:t[5]||(t[5]=r=>m.value=!1)},{default:l(()=>[K]),_:1}),e(_,{type:"primary",onClick:t[6]||(t[6]=r=>c())},{default:l(()=>[T]),_:1})]),default:l(()=>[e(f,{ref_key:"dataFormRef",ref:o,model:i,rules:v.value,"label-width":"100px",onKeyup:t[4]||(t[4]=x(r=>c(),["enter"]))},{default:l(()=>[e(s,{label:"\u9879\u76EE\u540D",prop:"projectName"},{default:l(()=>[e(a,{modelValue:i.projectName,"onUpdate:modelValue":t[0]||(t[0]=r=>i.projectName=r),placeholder:"\u9879\u76EE\u540D"},null,8,["modelValue"])]),_:1}),e(s,{label:"\u9879\u76EE\u6807\u8BC6",prop:"projectCode"},{default:l(()=>[e(a,{modelValue:i.projectCode,"onUpdate:modelValue":t[1]||(t[1]=r=>i.projectCode=r),placeholder:"\u9879\u76EE\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),e(s,{label:"\u9879\u76EE\u5305\u540D",prop:"projectPackage"},{default:l(()=>[e(a,{modelValue:i.projectPackage,"onUpdate:modelValue":t[2]||(t[2]=r=>i.projectPackage=r),placeholder:"\u9879\u76EE\u5305\u540D"},null,8,["modelValue"])]),_:1}),e(s,{label:"\u9879\u76EE\u8DEF\u5F84",prop:"projectPath"},{default:l(()=>[e(a,{modelValue:i.projectPath,"onUpdate:modelValue":t[3]||(t[3]=r=>i.projectPath=r),placeholder:"\u9879\u76EE\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),M=E(" \u53D8\u66F4\u540E\u7684\u4FE1\u606F "),G=E("\u53D6\u6D88"),J=E("\u4E0B\u8F7D"),Q=k({__name:"download",setup(g,{expose:p}){const j=F(!1),m=F(),o=h({id:"",projectName:"",projectCode:"",projectPackage:"",projectPath:"",modifyProjectName:"",modifyProjectCode:"",modifyProjectPackage:"",exclusions:"",modifySuffix:""}),i=c=>{j.value=!0,o.id="",m.value&&m.value.resetFields(),c&&b(c)},b=c=>{N(c).then(u=>{Object.assign(o,u.data)})},V=F({modifyProjectName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],modifyProjectCode:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],modifyProjectPackage:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],exclusions:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],modifySuffix:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=()=>{m.value.validate(async c=>{if(!c)return!1;await $(o),O(o.id),j.value=!1})};return p({init:i}),(c,u)=>{const t=d("el-input"),a=d("el-form-item"),s=d("el-col"),f=d("el-row"),_=d("el-divider"),y=d("el-form"),r=d("el-button"),A=d("el-dialog");return P(),w(A,{modelValue:j.value,"onUpdate:modelValue":u[12]||(u[12]=n=>j.value=n),title:"\u6E90\u7801\u4E0B\u8F7D","close-on-click-modal":!1},{footer:l(()=>[e(r,{onClick:u[10]||(u[10]=n=>j.value=!1)},{default:l(()=>[G]),_:1}),e(r,{type:"primary",onClick:u[11]||(u[11]=n=>v())},{default:l(()=>[J]),_:1})]),default:l(()=>[e(y,{ref_key:"dataFormRef",ref:m,model:o,rules:V.value,"label-width":"100px",onKeyup:u[9]||(u[9]=x(n=>v(),["enter"]))},{default:l(()=>[e(f,null,{default:l(()=>[e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u540D",prop:"projectName"},{default:l(()=>[e(t,{modelValue:o.projectName,"onUpdate:modelValue":u[0]||(u[0]=n=>o.projectName=n),placeholder:"\u9879\u76EE\u540D",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u8DEF\u5F84",prop:"projectPath"},{default:l(()=>[e(t,{modelValue:o.projectPath,"onUpdate:modelValue":u[1]||(u[1]=n=>o.projectPath=n),placeholder:"\u9879\u76EE\u8DEF\u5F84",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u6807\u8BC6",prop:"projectCode"},{default:l(()=>[e(t,{modelValue:o.projectCode,"onUpdate:modelValue":u[2]||(u[2]=n=>o.projectCode=n),placeholder:"\u9879\u76EE\u6807\u8BC6",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u5305\u540D",prop:"projectPackage"},{default:l(()=>[e(t,{modelValue:o.projectPackage,"onUpdate:modelValue":u[3]||(u[3]=n=>o.projectPackage=n),placeholder:"\u9879\u76EE\u5305\u540D",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[M]),_:1}),e(a,{label:"\u9879\u76EE\u540D",prop:"modifyProjectName"},{default:l(()=>[e(t,{modelValue:o.modifyProjectName,"onUpdate:modelValue":u[4]||(u[4]=n=>o.modifyProjectName=n),placeholder:"\u9879\u76EE\u540D"},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u6807\u8BC6",prop:"modifyProjectCode"},{default:l(()=>[e(t,{modelValue:o.modifyProjectCode,"onUpdate:modelValue":u[5]||(u[5]=n=>o.modifyProjectCode=n),placeholder:"\u9879\u76EE\u6807\u8BC6"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(a,{label:"\u9879\u76EE\u5305\u540D",prop:"modifyProjectPackage"},{default:l(()=>[e(t,{modelValue:o.modifyProjectPackage,"onUpdate:modelValue":u[6]||(u[6]=n=>o.modifyProjectPackage=n),placeholder:"\u9879\u76EE\u5305\u540D"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(s,{span:12},{default:l(()=>[e(a,{label:"\u6392\u9664\u6587\u4EF6",prop:"exclusions"},{default:l(()=>[e(t,{modelValue:o.exclusions,"onUpdate:modelValue":u[7]||(u[7]=n=>o.exclusions=n),placeholder:"\u6392\u9664\u6587\u4EF6"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(a,{label:"\u53D8\u66F4\u6587\u4EF6",prop:"modifySuffix"},{default:l(()=>[e(t,{modelValue:o.modifySuffix,"onUpdate:modelValue":u[8]||(u[8]=n=>o.modifySuffix=n),placeholder:"\u53D8\u66F4\u6587\u4EF6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),W=E("\u67E5\u8BE2"),X=E("\u65B0\u589E"),Y=E("\u5220\u9664"),Z=E("\u4FEE\u6539"),ee=E("\u6E90\u7801\u4E0B\u8F7D"),le=E("\u5220\u9664"),ue=k({name:"ProjectIndex"}),ae=k({...ue,setup(g){const p=h({dataListUrl:"/gen/project/page",deleteUrl:"/gen/project",queryForm:{projectName:""}}),j=F(),m=t=>{j.value.init(t)},o=F(),i=t=>{o.value.init(t)},{getDataList:b,selectionChangeHandle:V,sizeChangeHandle:v,currentChangeHandle:c,deleteBatchHandle:u}=H(p);return(t,a)=>{const s=d("el-input"),f=d("el-form-item"),_=d("el-button"),y=d("el-form"),r=d("el-table-column"),A=d("el-table"),n=d("el-pagination"),q=S("loading");return P(),z("div",null,[e(y,{inline:!0,model:p.queryForm,onKeyup:a[4]||(a[4]=x(C=>D(b)(),["enter"]))},{default:l(()=>[e(f,null,{default:l(()=>[e(s,{modelValue:p.queryForm.projectName,"onUpdate:modelValue":a[0]||(a[0]=C=>p.queryForm.projectName=C),placeholder:"\u9879\u76EE\u540D"},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(_,{onClick:a[1]||(a[1]=C=>D(b)())},{default:l(()=>[W]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(_,{type:"primary",onClick:a[2]||(a[2]=C=>m())},{default:l(()=>[X]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(_,{type:"danger",onClick:a[3]||(a[3]=C=>D(u)())},{default:l(()=>[Y]),_:1})]),_:1})]),_:1},8,["model"]),L((P(),w(A,{data:p.dataList,border:"",style:{width:"100%"},onSelectionChange:D(V)},{default:l(()=>[e(r,{type:"selection","header-align":"center",align:"center",width:"50"}),e(r,{prop:"projectName",label:"\u9879\u76EE\u540D","header-align":"center",align:"center"}),e(r,{prop:"projectCode",label:"\u9879\u76EE\u6807\u8BC6","header-align":"center",align:"center"}),e(r,{prop:"projectPackage",label:"\u9879\u76EE\u5305\u540D","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(r,{prop:"projectPath",label:"\u9879\u76EE\u8DEF\u5F84","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(r,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center"}),e(r,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"180"},{default:l(C=>[e(_,{type:"primary",link:"",onClick:U=>m(C.row.id)},{default:l(()=>[Z]),_:2},1032,["onClick"]),e(_,{type:"primary",link:"",onClick:U=>i(C.row.id)},{default:l(()=>[ee]),_:2},1032,["onClick"]),e(_,{type:"primary",link:"",onClick:U=>D(u)(C.row.id)},{default:l(()=>[le]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[q,p.dataListLoading]]),e(n,{"current-page":p.page,"page-sizes":p.pageSizes,"page-size":p.limit,total:p.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D(v),onCurrentChange:D(c)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(I,{ref_key:"addOrUpdateRef",ref:j,onRefreshDataList:D(b)},null,8,["onRefreshDataList"]),e(Q,{ref_key:"downloadRef",ref:o},null,512)])}}});export{ae as default};
